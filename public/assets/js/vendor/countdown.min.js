!function(t){"use strict";t.extend=function(e,n){if(e=e||{},arguments.length>2)for(var s=1;s<arguments.length;s++)t.extend(e,arguments[s]);else for(var r in n)e[r]=n[r];return e};var e=function(e){this.conf=t.extend({dateStart:new Date,dateEnd:new Date((new Date).getTime()+864e5),selector:".timer",msgBefore:"Be ready!",msgAfter:"It's over, sorry folks!",msgPattern:"{days} days, {hours} hours, {minutes} minutes and {seconds} seconds left.",onStart:null,onEnd:null,leadingZeros:!1,initialize:!0},e),this.started=!1,this.selector=document.querySelectorAll(this.conf.selector),this.interval=1e3,this.patterns=[{pattern:"{years}",secs:31536e3},{pattern:"{months}",secs:2628e3},{pattern:"{weeks}",secs:604800},{pattern:"{days}",secs:86400},{pattern:"{hours}",secs:3600},{pattern:"{minutes}",secs:60},{pattern:"{seconds}",secs:1}],!1!==this.initialize&&this.initialize()};e.prototype.initialize=function(){return this.defineInterval(),this.isOver()?this.outOfInterval():void this.run()},e.prototype.seconds=function(t){return t.getTime()/1e3},e.prototype.isStarted=function(){return this.seconds(new Date)>=this.seconds(this.conf.dateStart)},e.prototype.isOver=function(){return this.seconds(new Date)>=this.seconds(this.conf.dateEnd)},e.prototype.run=function(){var e,n=this,s=Math.abs(this.seconds(this.conf.dateEnd)-this.seconds(new Date));this.isStarted()?this.display(s):this.outOfInterval(),e=t.setInterval(function(){0>=--s?(t.clearInterval(e),n.outOfInterval(),n.callback("end")):n.isStarted()&&(n.started||(n.callback("start"),n.started=!0),n.display(s))},this.interval)},e.prototype.display=function(t){for(var e=this.conf.msgPattern,n=0;n<this.patterns.length;n++){var s=this.patterns[n];if(-1!==this.conf.msgPattern.indexOf(s.pattern)){var r=Math.floor(t/s.secs),i=this.conf.leadingZeros&&9>=r?"0"+r:r;t-=r*s.secs,e=e.replace(s.pattern,i)}}for(var o=0;o<this.selector.length;o++)this.selector[o].innerHTML=e},e.prototype.defineInterval=function(){for(var t=this.patterns.length;t>0;t--){var e=this.patterns[t-1];if(-1!==this.conf.msgPattern.indexOf(e.pattern))return void(this.interval=1e3*e.secs)}},e.prototype.outOfInterval=function(){for(var t=new Date<this.conf.dateStart?this.conf.msgBefore:this.conf.msgAfter,e=0;e<this.selector.length;e++)this.selector[e].innerHTML!==t&&(this.selector[e].innerHTML=t)},e.prototype.callback=function(e){var n=e.capitalize();"function"==typeof this.conf["on"+n]&&this.conf["on"+n](),void 0!==t.jQuery&&t.jQuery(this.conf.selector).trigger("countdown"+n)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},t.Countdown=e}(window);